(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1f3a766"],{"057f":function(e,t,r){var n=r("fc6a"),a=r("241c").f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return a(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?c(e):a(n(e))}},2909:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){if(Array.isArray(e))return n(e)}r.d(t,"a",(function(){return s}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}r("fb6a"),r("b0c0"),r("25f0");function o(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return a(e)||i(e)||o(e)||c()}},"3ca3":function(e,t,r){"use strict";var n=r("6547").charAt,a=r("69f3"),i=r("7dd0"),o="String Iterator",c=a.set,s=a.getterFor(o);i(String,"String",(function(e){c(this,{type:o,string:String(e),index:0})}),(function(){var e,t=s(this),r=t.string,a=t.index;return a>=r.length?{value:void 0,done:!0}:(e=n(r,a),t.index+=e.length,{value:e,done:!1})}))},"466d":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),i=r("50c4"),o=r("1d80"),c=r("8aa5"),s=r("14c3");n("match",1,(function(e,t,r){return[function(t){var r=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var o=a(e),l=String(this);if(!o.global)return s(o,l);var u=o.unicode;o.lastIndex=0;var f,d=[],p=0;while(null!==(f=s(o,l))){var m=String(f[0]);d[p]=m,""===m&&(o.lastIndex=c(l,i(o.lastIndex),u)),p++}return 0===p?null:d}]}))},"4df4":function(e,t,r){"use strict";var n=r("0366"),a=r("7b0b"),i=r("9bdd"),o=r("e95a"),c=r("50c4"),s=r("8418"),l=r("35a1");e.exports=function(e){var t,r,u,f,d,p,m=a(e),h="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,y=l(m),w=0;if(v&&(b=n(b,g>2?arguments[2]:void 0,2)),void 0==y||h==Array&&o(y))for(t=c(m.length),r=new h(t);t>w;w++)p=v?b(m[w],w):m[w],s(r,w,p);else for(f=y.call(m),d=f.next,r=new h;!(u=d.call(f)).done;w++)p=v?i(f,b,[u.value,w],!0):u.value,s(r,w,p);return r.length=w,r}},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"73f2":function(e,t,r){},"746f":function(e,t,r){var n=r("428f"),a=r("5135"),i=r("e5383"),o=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});a(t,e)||o(t,e,{value:i.f(e)})}},"82f6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list"},[r("a-modal",{attrs:{title:"分享链接","ok-text":"确认","cancel-text":"取消"},on:{ok:e.hideModal,cancel:e.close3},model:{value:e.visible3,callback:function(t){e.visible3=t},expression:"visible3"}},[r("a-form-model",{attrs:{model:e.form,"label-col":{span:6},"wrapper-col":{span:14}}},[r("a-form-model-item",{attrs:{label:"密码设置 "}},[r("a-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[r("a-radio",{attrs:{value:"1"}},[e._v(" 随机码 ")]),r("a-radio",{attrs:{value:"2"}},[e._v(" 无 ")]),r("a-radio",{attrs:{value:"3"}},[e._v(" 自定义 ")])],1)],1),r("a-form-model-item",{attrs:{label:"自定义密码"}},[r("a-input",{attrs:{disabled:"3"!==e.form.resource,placeholder:"请输入分享密码,长度4位"},model:{value:e.form.pass,callback:function(t){e.$set(e.form,"pass",t)},expression:"form.pass"}})],1),r("a-form-model-item",{attrs:{label:"有效期"}},[r("a-select",{attrs:{placeholder:"请选择有效时间"},model:{value:e.form.expired,callback:function(t){e.$set(e.form,"expired",t)},expression:"form.expired"}},[r("a-select-option",{attrs:{value:"86400"}},[e._v(" 1天 ")]),r("a-select-option",{attrs:{value:"604000"}},[e._v(" 7天 ")]),r("a-select-option",{attrs:{value:"0"}},[e._v(" 永久 ")])],1)],1)],1)],1),r("a-modal",{staticClass:"list-window",attrs:{title:e.windowTitle,visible:e.visible,centered:"",footer:null,mask:!1},on:{cancel:e.close}},[e.toggleVideo?r("img",{staticClass:"preview",attrs:{src:e.url}}):r("iframe",{staticClass:"window-content",attrs:{align:"middle",src:e.url,frameborder:"0",allowfullscreen:"true",border:"0",marginwidth:"0",marginheight:"0",scrolling:"auto"}})]),r("a-modal",{staticClass:"list-window",attrs:{title:"直链",visible:e.visible2,centered:"",footer:null,mask:!1},on:{cancel:e.close2}},[r("a-textarea",{attrs:{autoSize:""},model:{value:e.copys,callback:function(t){e.copys=t},expression:"copys"}})],1),r("div",{staticStyle:{"margin-bottom":"16px"}},[r("a-button",{staticClass:"btn-back",attrs:{type:"primary",disabled:e.hasBack,icon:"rollback"},on:{click:e.back}},[e._v("返回上一级")]),r("a-tooltip",[r("template",{slot:"title"},[e._v(" 注意:不能获取文件夹直链 ")]),r("a-button",{attrs:{type:"primary",disabled:!e.hasSelected},on:{click:e.getdownloadUrls}},[e._v(" 获取直链 ")])],2),r("span",{staticStyle:{"margin-left":"8px"}},[e.hasSelected?[e._v(" "+e._s(" 已选中"+e.selectedRowKeys.length+"项 ")+" ")]:e._e()],2),e.selectUser&&e.selectFamilyId?r("a-tooltip",[r("template",{slot:"title"},[e._v(" 切换用户 ")]),r("a-cascader",{ref:"casc",staticStyle:{width:"220px"},attrs:{options:e.options,allowClear:!1,"change-on-select":"","load-data":e.loadData,defaultValue:[e.selectUser,e.selectFamilyId]},on:{change:e.CascaderOnChange},model:{value:e.CascValue,callback:function(t){e.CascValue=t},expression:"CascValue"}})],2):e._e(),r("a-button",{staticClass:"btn-refresh",attrs:{type:"primary",icon:"sync"},on:{click:e.refresh}},[e._v("刷新")]),r("a-tooltip",[r("template",{slot:"title"},[e._v(" 上传新文件后必须刷新缓存才能显示 ")]),r("a-button",{staticClass:"btn-refresh",attrs:{type:"danger",icon:"delete"},on:{click:e.cleanCache}},[e._v("清空缓存")])],2),r("a-input-search",{staticStyle:{float:"right",width:"20%"},attrs:{placeholder:"请输入搜索内容","enter-button":""},on:{search:e.onSearch}})],1),r("a-table",{attrs:{size:"small",scroll:{y:"65vh"},"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.data,loading:e.loading,pagination:e.pagination},on:{change:e.changeTables},scopedSlots:e._u([{key:"fileName",fn:function(t,n){return[r("a-icon",{attrs:{type:"folder"===n.fileType?"folder":"file"}}),e._v(" "+e._s(t)+" ")]}},{key:"fileType",fn:function(t){return[r("a-tag",{attrs:{color:"#87d068"}},[e._v(" "+e._s(t)+" ")])]}},{key:"operation",fn:function(t,n){return[r("a-row",[r("a-col",{attrs:{span:24}},["folder"===n.fileType?r("a-button",{staticClass:"file-btn",attrs:{type:"primary",icon:"folder-open",size:"small"},on:{click:function(t){return e.getFileList(n.fileId)}}},[e._v(" 打开 ")]):e._e(),"mp4"===n.fileType||"mp3"===n.fileType?r("a-button",{staticClass:"file-btn",attrs:{type:"primary",icon:"play-circle",size:"small"},on:{click:function(t){return e.play(n)}}},[e._v(" 播放 ")]):e._e(),!n.previewUrl||"jpg"!==n.fileType&&"png"!==n.fileType&&"gif"!==n.fileType?e._e():r("a-button",{staticClass:"file-btn",attrs:{type:"primary",icon:"file-image",size:"small"},on:{click:function(t){return e.preview(n)}}},[e._v(" 预览 ")]),n.downloadUrl?r("a-button",{staticClass:"file-btn",attrs:{type:"danger",icon:"down-circle",size:"small"},on:{click:function(t){return e.down(n)}}},[e._v(" 下载 ")]):e._e(),r("a-button",{staticClass:"file-btn",attrs:{type:"dashed",icon:"share-alt",size:"small"},on:{click:function(t){return e.share(n)}}},[e._v(" 分享 ")])],1)],1)]}}])})],1)},a=[],i=(r("99af"),r("4de4"),r("7db0"),r("4160"),r("d81d"),r("b0c0"),r("d3b7"),r("ac1f"),r("25f0"),r("466d"),r("159b"),r("5530")),o=r("2909"),c=(r("96cf"),r("1da1")),s=r("ae16"),l={mixins:[s["a"]],props:{e:Object},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsers();case 2:return t.next=4,e.getFamilyIds(e.selectUser);case 4:e.options[0].children=e.formatFamilyId(e.familyIds.familyInfo),e.CascValue=[e.selectUser,e.selectFamilyId];case 6:case"end":return t.stop()}}),t)})))()},watch:{e:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.query="",e.fileId){t.next=10;break}if("家庭云"!==e.breadcrumbName){t.next=8;break}return t.next=5,r.getFileList();case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0="";case 9:return t.abrupt("return",t.t0);case 10:if(n=r.currentInfo.path.find((function(t){return t.fid===e.fileId})),n){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,r.getFileList(e.fileId);case 15:case"end":return t.stop()}}),t)})))()},data:function(e,t){this.BreadcrumbConcat()},selectFamilyId:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.query="",e.next=3,r.getFileList();case 3:case"end":return e.stop()}}),e)})))()}},data:function(){return{form:{pass:"",expired:"86400",resource:"1"},options:[],users:[],CascValue:[],familyIds:[],selectUser:"",selectFamilyId:"",visible:!1,url:"",windowTitle:"",pagination:{showTotal:function(e,t){return"当前范围:".concat(t[0],"-").concat(t[1],"  总数:  ").concat(e)},showQuickJumper:!0},loading:!0,routers:[{breadcrumbName:"列表"},{breadcrumbName:"家庭云"}],data:[],currentInfo:null,columns:[{title:"文件名",dataIndex:"fileName",width:"100px",scopedSlots:{customRender:"fileName"},ellipsis:!0},{title:"文件大小",dataIndex:"fileSize",width:"100px"},{title:"文件ID",dataIndex:"fileId",width:"160px"},{title:"文件类型",dataIndex:"fileType",scopedSlots:{customRender:"fileType"},width:"150px"},{title:"操作",dataIndex:"operation",width:"200px",scopedSlots:{customRender:"operation"}}],selectedRowKeys:[],selectedRowName:[],query:"",copys:"",visible2:!1,visible3:!1,toggleVideo:!0,Addshare:null}},computed:{hasBack:function(){return!this.currentInfo||!!this.currentInfo.path&&this.currentInfo.path.length<=1},hasSelected:function(){return this.selectedRowKeys.length>0}},activated:function(){this.currentInfo?this.BreadcrumbConcat():this.$emit("ChangeBreadcrumb",this.routers)},methods:{hideModal:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("3"!==e.form.resource){t.next=6;break}if(!(e.form.pass.length>11)&&e.form.pass.length){t.next=3;break}return t.abrupt("return",e.$message.error({content:"密码最大长度不能大于11位"}));case 3:r=e.form.pass,t.next=7;break;case 6:r="2"===e.form.resource?"":"random";case 7:return e.Addshare.expired=e.form.expired,t.prev=8,t.next=11,fetch("".concat(e.$config.server,"/addShare"),{method:"POST",body:JSON.stringify({file:e.Addshare,pass:r}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("access"))}});case 11:return t.next=13,t.sent.json();case 13:if(n=t.sent,e.visible3=!1,200===n.code){t.next=17;break}return t.abrupt("return",e.$message.error({content:n.msg||n.message||"未知错误"}));case 17:e.$notification.success({message:"分享成功",description:"分享链接: ".concat(e.$config.server,"/shareList/").concat(e.Addshare.fileId," \n\n 密码: ").concat(n.pass?n.pass:"空"),duration:0,btn:function(t){return t("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return e.$notification.close("share")}}},"关闭")},key:"share",onClose:close}),e.form.resource="1",e.form.pass="",e.form.expired="86400",t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](8),e.$message.error({content:t.t0.toString()});case 26:case"end":return t.stop()}}),t,null,[[8,23]])})))()},share:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.visible3=!0,t.Addshare=Object.assign({},e,{user:t.selectUser,category:"家庭云"});case 2:case"end":return r.stop()}}),r)})))()},close3:function(){var e=this;this.visible3=!1,this.$nextTick((function(){e.Addshare=null}))},loadData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e[e.length-1],n.loading=!0,t.selectUser=e[0].value,r.next=5,t.getFamilyIds(t.selectUser);case 5:e[0].children=t.formatFamilyId(t.familyIds.familyInfo),t.CascValue=[t.selectUser,t.selectFamilyId],n.loading=!1,t.options=Object(o["a"])(t.options);case 9:case"end":return r.stop()}}),r)})))()},cleanCache:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.$confirm({content:"确定要清空缓存吗?",onOk:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(e.$config.server,"/cleanCache"),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 3:return t.next=5,t.sent.json();case 5:if(r=t.sent,200===r.code){t.next=8;break}throw new Error(r.msg);case 8:e.$message.success({content:r.msg}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$message.error({content:t.t0.toString()});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));function r(){return t.apply(this,arguments)}return r}(),okText:"确定",cancelText:"取消",onCancel:function(){return r.destroy()}});case 1:case"end":return t.stop()}}),t)})))()},CascaderOnChange:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e.length){t.next=2;break}return t.abrupt("return");case 2:r.selectUser=e[0],r.selectFamilyId=e[1],r.CascValue=[r.selectUser,r.selectFamilyId];case 5:case"end":return t.stop()}}),t)})))()},getFamilyIds:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("".concat(t.$config.server,"/familyInfos/").concat(e),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 2:return r.next=4,r.sent.json();case 4:t.familyIds=r.sent,t.selectFamilyId=t.familyIds.familyInfo.find((function(t){return t.remarkName===+e})).familyId;case 6:case"end":return r.stop()}}),r)})))()},back:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getFileList(e.currentInfo.path[e.currentInfo.path.length-2].fid,1);case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getFileList(e.currentInfo.path[e.currentInfo.path.length-1].fid,1);case 2:case"end":return t.stop()}}),t)})))()},getdownloadUrls:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasSelected){t.next=2;break}return t.abrupt("return");case 2:r=e.selectedRowKeys.map((function(t,r){return"".concat(e.selectedRowName[r]," : ").concat(e.$config.server,"/familyDown/").concat(e.selectUser,"/").concat(e.selectFamilyId,"/").concat(t,"?auth=").concat(JSON.parse(localStorage.getItem("access"))," \n\r")})),e.visible2=!0,r.forEach((function(t){e.copys+=t}));case 5:case"end":return t.stop()}}),t)})))()},onSearch:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.query=e,r.next=3,t.getFileList();case 3:case"end":return r.stop()}}),r)})))()},getUsers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(e.$config.server,"/users"),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 3:return t.next=5,t.sent.json();case 5:if(r=t.sent,"TokenExpiredError"!==r.name){t.next=8;break}throw new Error("认证已过期,请重新认证");case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t["catch"](0),e.loading=!1,e.$message.error({content:t.t0.toString(),duration:5}),t.abrupt("return",e.$router.push("auth"));case 15:e.users=r,e.options=e.users.map((function(e){return{value:e.uid,label:e.uid,isLeaf:!1}})),e.selectUser=r[0]&&r[0].uid||"无";case 18:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){var e=this;this.visible=!1,this.$nextTick((function(){e.url="",e.windowTitle=""}))},close2:function(){var e=this;this.visible2=!1,this.$nextTick((function(){e.copys=""}))},BreadcrumbConcat:function(){var e=[].concat(Object(o["a"])(this.routers),Object(o["a"])(this.formatPath(this.currentInfo.path)));this.$emit("ChangeBreadcrumb",e)},changeTables:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.current,a=t.formatPath(t.currentInfo.path),i=a[a.length-1],o=t.query?" ":i.fileId,r.next=4,t.getFileList(o,n);case 4:case"end":return r.stop()}}),r)})))()},down:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:window.open("".concat(t.$config.server,"/familyDown/").concat(t.selectUser,"/").concat(t.selectFamilyId,"/").concat(e.fileId,"?auth=").concat(JSON.parse(localStorage.getItem("access"))));case 1:case"end":return r.stop()}}),r)})))()},preview:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.windowTitle=e.fileNames,t.visible=!0,t.toggleVideo=!0,t.url=e.previewUrl;case 4:case"end":return r.stop()}}),r)})))()},play:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.windowTitle=e.fileName,t.visible=!0,t.toggleVideo=!1,t.url="".concat(t.$config.server,"/familyPlayer/").concat(t.selectUser,"/").concat(t.selectFamilyId,"/").concat(e.fileId,"?auth=").concat(JSON.parse(localStorage.getItem("access")));case 4:case"end":return r.stop()}}),r)})))()},getFileList:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o,c,s,l,u,f,d,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:" ",a=e.length>1&&void 0!==e[1]?e[1]:1,t.loading=!0,t.selectedRowKeys=[],t.selectedRowName=[],"无"!==t.selectUser){r.next=8;break}return t.loading=!1,r.abrupt("return",t.$message.error({content:"还未登录请先登录"}));case 8:if(t.query&&" "==n){r.next=18;break}return r.next=11,fetch("".concat(t.$config.server,"/family/").concat(t.selectUser,"/").concat(n,"/").concat(a).concat(t.selectFamilyId?"?family="+t.selectFamilyId:""),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 11:return r.next=13,r.sent.json();case 13:o=r.sent,c=o.listFiles.fileList,i=c,r.next=24;break;case 18:return r.next=20,fetch("".concat(t.$config.server,"/familySearch/").concat(t.selectUser,"/").concat(t.selectFamilyId,"/").concat(t.query,"/").concat(a),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 20:return r.next=22,r.sent.json();case 22:s=r.sent,i=s;case 24:if(500!==i.code&&404!==i.code){r.next=27;break}return t.loading=!1,r.abrupt("return",t.$message.error({content:i.msg}));case 27:if(t.currentInfo=i,l=t.currentInfo.count,t.setPageInfo(100,l,a),u=t.formatList(t.currentInfo)," "!=n){r.next=35;break}f=[{fid:u[0]&&u[0].parentId,fname:"全部文件"}],r.next=42;break;case 35:return r.next=37,fetch("".concat(t.$config.server,"/familyGetFileInfo/").concat(t.selectUser,"/").concat(t.selectFamilyId,"/").concat(n),{headers:{Authorization:JSON.parse(localStorage.getItem("access"))}});case 37:return r.next=39,r.sent.json();case 39:d=r.sent,p=d.parentFolderList.folder,f=p.length?p:[p];case 42:t.$set(t.currentInfo,"path",f),t.currentInfo.path[0].fname="全部文件",t.data=u,t.loading=!1;case 46:case"end":return r.stop()}}),r)})))()},setPageInfo:function(e,t,r){var n=Object(i["a"])({},this.pagination);n.pageSize=e,n.total=t,n.pageNum=r,n.current=r,this.pagination=n},formatPath:function(e){return e.map((function(e){return{breadcrumbName:e.fname,fileId:e.fid}}))},formatFamilyId:function(e){return e.map((function(e){return{value:e.familyId,label:e.remarkName,isLeaf:!0}}))},formatList:function(e){var t=this,r=e.folder?e.folder.length?e.folder:[e.folder]:[],n=e.file?e.file.length?e.file:[e.file]:[];return[].concat(Object(o["a"])(r),Object(o["a"])(n)).map((function(e){var r=e.name.toString(),n=r.match(/\.(\w+)$/i);return{key:e.id,fileName:e.name,fileType:n?n[1]:"folder",fileId:e.id,parentId:e.parentId,fileSize:e.size?t.formatFileSize(e.size):"无",downloadUrl:!!n,previewUrl:!!e.icon&&e.icon.max600}}))},onSelectChange:function(e,t){this.selectedRowKeys=e.filter((function(e,r){return"folder"!==t[r].fileType})),this.selectedRowName=this.selectedRowKeys.map((function(e){return t.find((function(t){return t.key===e})).fileName}))}}},u=l,f=(r("f8dc"),r("2877")),d=Object(f["a"])(u,n,a,!1,null,null,null);t["default"]=d.exports},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),i=r("e8b5"),o=r("861d"),c=r("7b0b"),s=r("50c4"),l=r("8418"),u=r("65f0"),f=r("1dde"),d=r("b622"),p=r("2d00"),m=d("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=p>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=f("concat"),y=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)},w=!b||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,r,n,a,i,o=c(this),f=u(o,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?o:arguments[t],y(i)){if(a=s(i.length),d+a>h)throw TypeError(g);for(r=0;r<a;r++,d++)r in i&&l(f,d,i[r])}else{if(d>=h)throw TypeError(g);l(f,d++,i)}return f.length=d,f}})},a4d3:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("d066"),o=r("c430"),c=r("83ab"),s=r("4930"),l=r("fdbf"),u=r("d039"),f=r("5135"),d=r("e8b5"),p=r("861d"),m=r("825a"),h=r("7b0b"),g=r("fc6a"),b=r("c04e"),v=r("5c6c"),y=r("7c73"),w=r("df75"),x=r("241c"),I=r("057f"),S=r("7418"),k=r("06cf"),O=r("9bf2"),j=r("d1e7"),R=r("9112"),C=r("6eeb"),F=r("5692"),$=r("f772"),N=r("d012"),T=r("90e3"),_=r("b622"),U=r("e5383"),A=r("746f"),P=r("d44e"),z=r("69f3"),E=r("b727").forEach,J=$("hidden"),L="Symbol",D="prototype",V=_("toPrimitive"),K=z.set,q=z.getterFor(L),B=Object[D],M=a.Symbol,Q=i("JSON","stringify"),G=k.f,W=O.f,H=I.f,X=j.f,Y=F("symbols"),Z=F("op-symbols"),ee=F("string-to-symbol-registry"),te=F("symbol-to-string-registry"),re=F("wks"),ne=a.QObject,ae=!ne||!ne[D]||!ne[D].findChild,ie=c&&u((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=G(B,t);n&&delete B[t],W(e,t,r),n&&e!==B&&W(B,t,n)}:W,oe=function(e,t){var r=Y[e]=y(M[D]);return K(r,{type:L,tag:e,description:t}),c||(r.description=t),r},ce=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof M},se=function(e,t,r){e===B&&se(Z,t,r),m(e);var n=b(t,!0);return m(r),f(Y,n)?(r.enumerable?(f(e,J)&&e[J][n]&&(e[J][n]=!1),r=y(r,{enumerable:v(0,!1)})):(f(e,J)||W(e,J,v(1,{})),e[J][n]=!0),ie(e,n,r)):W(e,n,r)},le=function(e,t){m(e);var r=g(t),n=w(r).concat(me(r));return E(n,(function(t){c&&!fe.call(r,t)||se(e,t,r[t])})),e},ue=function(e,t){return void 0===t?y(e):le(y(e),t)},fe=function(e){var t=b(e,!0),r=X.call(this,t);return!(this===B&&f(Y,t)&&!f(Z,t))&&(!(r||!f(this,t)||!f(Y,t)||f(this,J)&&this[J][t])||r)},de=function(e,t){var r=g(e),n=b(t,!0);if(r!==B||!f(Y,n)||f(Z,n)){var a=G(r,n);return!a||!f(Y,n)||f(r,J)&&r[J][n]||(a.enumerable=!0),a}},pe=function(e){var t=H(g(e)),r=[];return E(t,(function(e){f(Y,e)||f(N,e)||r.push(e)})),r},me=function(e){var t=e===B,r=H(t?Z:g(e)),n=[];return E(r,(function(e){!f(Y,e)||t&&!f(B,e)||n.push(Y[e])})),n};if(s||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=T(e),r=function(e){this===B&&r.call(Z,e),f(this,J)&&f(this[J],t)&&(this[J][t]=!1),ie(this,t,v(1,e))};return c&&ae&&ie(B,t,{configurable:!0,set:r}),oe(t,e)},C(M[D],"toString",(function(){return q(this).tag})),C(M,"withoutSetter",(function(e){return oe(T(e),e)})),j.f=fe,O.f=se,k.f=de,x.f=I.f=pe,S.f=me,U.f=function(e){return oe(_(e),e)},c&&(W(M[D],"description",{configurable:!0,get:function(){return q(this).description}}),o||C(B,"propertyIsEnumerable",fe,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:M}),E(w(re),(function(e){A(e)})),n({target:L,stat:!0,forced:!s},{for:function(e){var t=String(e);if(f(ee,t))return ee[t];var r=M(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(f(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),n({target:"Object",stat:!0,forced:!s,sham:!c},{create:ue,defineProperty:se,defineProperties:le,getOwnPropertyDescriptor:de}),n({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:pe,getOwnPropertySymbols:me}),n({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(h(e))}}),Q){var he=!s||u((function(){var e=M();return"[null]"!=Q([e])||"{}"!=Q({a:e})||"{}"!=Q(Object(e))}));n({target:"JSON",stat:!0,forced:he},{stringify:function(e,t,r){var n,a=[e],i=1;while(arguments.length>i)a.push(arguments[i++]);if(n=t,(p(t)||void 0!==e)&&!ce(e))return d(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ce(t))return t}),a[1]=t,Q.apply(null,a)}})}M[D][V]||R(M[D],V,M[D].valueOf),P(M,L),N[J]=!0},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),o=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:a})},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,o=i.toString,c=/^\s*function ([^ (]*)/,s="name";n&&!(s in i)&&a(i,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(e){return""}}})},d28b:function(e,t,r){var n=r("746f");n("iterator")},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),i=r("56ef"),o=r("fc6a"),c=r("06cf"),s=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=o(e),a=c.f,l=i(n),u={},f=0;while(l.length>f)r=a(n,t=l[f++]),void 0!==r&&s(u,t,r);return u}})},ddb0:function(e,t,r){var n=r("da84"),a=r("fdbc"),i=r("e260"),o=r("9112"),c=r("b622"),s=c("iterator"),l=c("toStringTag"),u=i.values;for(var f in a){var d=n[f],p=d&&d.prototype;if(p){if(p[s]!==u)try{o(p,s,u)}catch(h){p[s]=u}if(p[l]||o(p,l,f),a[f])for(var m in i)if(p[m]!==i[m])try{o(p,m,i[m])}catch(h){p[m]=i[m]}}}},e01a:function(e,t,r){"use strict";var n=r("23e7"),a=r("83ab"),i=r("da84"),o=r("5135"),c=r("861d"),s=r("9bf2").f,l=r("e893"),u=i.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(f[t]=!0),t};l(d,u);var p=d.prototype=u.prototype;p.constructor=d;var m=p.toString,h="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=m.call(e);if(o(f,e))return"";var r=h?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),i=r("fc6a"),o=r("06cf").f,c=r("83ab"),s=a((function(){o(1)})),l=!c||s;n({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(e,t){return o(i(e),t)}})},e5383:function(e,t,r){var n=r("b622");t.f=n},f8dc:function(e,t,r){"use strict";var n=r("73f2"),a=r.n(n);a.a}}]);
//# sourceMappingURL=chunk-c1f3a766.af11c833.js.map